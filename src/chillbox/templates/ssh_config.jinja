# Generated from chillbox template ssh_config.jinja for temporary use.
# Use the '-F' ssh option when using this file.
{%- for server in user_server_list %}
# ssh -F {{ ssh_config }} {{ server.name }}
{%- endfor %}

{% if user_managed_ssh_config %}
# Inline the user managed ssh_config file instead of using 'Include' since
# Python package paramiko only supports some ssh_config settings.
# https://docs.paramiko.org/en/stable/api/config.html
#
## Start of user managed ssh_config file ##
{{ user_managed_ssh_config }}
## End of user managed ssh_config file ##
{%- endif %}

User {{ current_user }}

# Use a chillbox managed known_hosts file.
StrictHostKeyChecking ask
UserKnownHostsFile {{ known_hosts_file }}

{%- if identity_file %}
# Temporary identity file decrypted from {{ current_user }}.chillbox.pem.aes
IdentityFile {{ identity_file }}
{%- endif %}

# The current user ({{ current_user }}) only has access to these servers.
{% for server in user_server_list %}
Host {{ server.ip }} {{ server.name }}
  Hostname {{ server.ip }}
  HostKeyAlias {{ server.name }}
  {%- if server.ssh_port %}
  Port {{ server.ssh_port }}
  {%- endif %}
{% endfor %}
